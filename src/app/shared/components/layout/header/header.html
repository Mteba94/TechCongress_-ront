<!-- <header class="sticky top-0 z-50 w-full bg-[var(--color-card)] border-b border-[var(--color-border)] shadow-subtle">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center">
        <button
          (click)="handleNavigation('/congress-homepage')"
          class="flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200 cursor-pointer"
        >
          <div class="w-10 h-10 bg-[var(--color-primary)] rounded-lg flex items-center justify-center">
            <lucide-icon [img]="icons.zap" color="white" [size]="24"></lucide-icon>
          </div>
          <div class="hidden sm:block">
            <h1 class="text-xl font-heading font-semibold text-[var(--color-foreground)]">
              Congreso UMG
            </h1>
            <p class="text-xs font-caption text-[var(--color-muted-foreground)]">
              GUASTATOYA
            </p>
          </div>
        </button>
      </div>

      <nav class="hidden lg:flex items-center space-x-8">
        @for (item of filteredNavItems; track item.path) {
          <button
            (click)="handleNavigation(item.path)"
            [ngClass]="{
              'text-[var(--color-primary)] bg-[var(--color-primary)]/[0.10]': isActivePath(item.path),
              'text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)]': !isActivePath(item.path)
            }"
            class="flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-body font-medium transition-colors duration-200 cursor-pointer"
          >
            <lucide-icon [img]="item.icon" [size]="18"></lucide-icon>
            <span>{{ item.label }}</span>
          </button>
        }
      </nav>

      <div class="hidden lg:flex items-center space-x-4">
        @if (isAuthenticated) {
          <div class="relative group">
            <button class="flex items-center space-x-2 p-2 rounded-md hover:bg-[var(--color-muted)] text-[var(--color-muted-foreground)] transition-colors duration-200">
              <lucide-icon [img]="icons.user" [size]="20"></lucide-icon>
              <span>{{ user?.name || 'Usuario' }}</span>
            </button>
            <div class="absolute right-0 mt-2 w-48 rounded-md shadow-elevation-2 bg-[var(--color-card)] border border-[var(--color-border)] hidden group-hover:block transition-all duration-300 animate-fade-in">
              <button (click)="handleNavigation('/user-dashboard')" class="w-full flex items-center space-x-3 px-4 py-3 text-left text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors duration-200 rounded-t-md">
                <lucide-icon [img]="icons.user" [size]="20"></lucide-icon>
                <span class="font-body font-medium">Mi Perfil</span>
              </button>
              <button (click)="handleLogout()" class="w-full flex items-center space-x-3 px-4 py-3 text-left text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors duration-200 rounded-b-md">
                <lucide-icon [img]="icons.logOut" [size]="20"></lucide-icon>
                <span class="font-body font-medium">Cerrar Sesión</span>
              </button>
            </div>
          </div>
        } @else {
          <app-button
            variant="default"
            size="sm"
            (btnClick)="handleLogin()"
          >
            <lucide-icon [img]="icons.logIn" [size]="18"></lucide-icon>
            <span>Acceder</span>
          </app-button>
        }
      </div>

      <button
        (click)="toggleMobileMenu()"
        class="lg:hidden p-2 rounded-md text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors duration-200"
        aria-label="Toggle mobile menu"
      >
        <lucide-icon [img]="isMobileMenuOpen ? icons.x : icons.menu" [size]="24"></lucide-icon>
      </button>
    </div>

    @if (isMobileMenuOpen) {
      <div class="lg:hidden border-t border-[var(--color-border)] bg-[var(--color-card)] animate-slide-in">
        <nav class="py-4 space-y-2">
          @for (item of filteredNavItems; track item.path) {
            <button
              (click)="handleNavigation(item.path)"
              [ngClass]="{
                'text-[var(--color-primary)] bg-[var(--color-primary)]/[0.10]': isActivePath(item.path),
                'text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)]': !isActivePath(item.path)
              }"
              class="w-full flex items-center space-x-3 px-4 py-3 text-left rounded-md transition-colors duration-200"
            >
              <lucide-icon [img]="item.icon" [size]="20"></lucide-icon>
              <span class="font-body font-medium">{{ item.label }}</span>
            </button>
          }
          
          <div class="pt-4 border-t border-[var(--color-border)] mt-4">
            @if (isAuthenticated) {
              <div class="px-4 space-y-2">
                <button
                  (click)="handleNavigation('/user-dashboard')"
                  class="w-full flex items-center space-x-3 px-4 py-3 text-left rounded-md text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors duration-200"
                >
                  <lucide-icon [img]="icons.user" [size]="20"></lucide-icon>
                  <span class="font-body font-medium">Mi Perfil</span>
                </button>
                <button
                  (click)="handleLogout()"
                  class="w-full flex items-center space-x-3 px-4 py-3 text-left rounded-md text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors duration-200"
                >
                  <lucide-icon [img]="icons.logOut" [size]="20"></lucide-icon>
                  <span class="font-body font-medium">Cerrar Sesión</span>
                </button>
              </div>
            } @else {
              <div class="px-4">
                <app-button
                  variant="default"
                  size="sm"
                  (btnClick)="handleLogin()"
                  class="w-full"
                >
                  <lucide-icon [img]="icons.logIn" [size]="18"></lucide-icon>
                  <span>Acceder</span>
                </app-button>
              </div>
            }
          </div>
        </nav>
      </div>
    }
  </div>
</header> -->



<header class="sticky top-0 z-50 w-full bg-[var(--color-card)] border-b border-[var(--color-border)] shadow-subtle">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center">
        <button
          (click)="handleNavigation('/congress-homepage')"
          class="flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200 cursor-pointer"
        >
          <div class="w-10 h-10 bg-[var(--color-primary)] rounded-lg flex items-center justify-center">
            <lucide-icon [img]="icons.zap" color="white" [size]="24"></lucide-icon>
          </div>
          <div class="hidden sm:block">
            <h1 class="text-xl font-heading font-semibold text-[var(--color-foreground)]">
              Congreso UMG
            </h1>
            <p class="text-xs font-caption text-[var(--color-muted-foreground)]">
              GUASTATOYA
            </p>
          </div>
        </button>
      </div>

      <nav class="hidden lg:flex items-center space-x-8">
        @for (item of filteredNavItems; track item.path) {
          <button
            (click)="handleNavigation(item.path)"
            [ngClass]="{
              'text-[var(--color-primary)] bg-[var(--color-primary)]/[0.10]': isActivePath(item.path),
              'text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)]': !isActivePath(item.path)
            }"
            class="flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-body font-medium transition-colors duration-200 cursor-pointer"
          >
            <lucide-icon [img]="item.icon" [size]="18"></lucide-icon>
            <span>{{ item.label }}</span>
          </button>
        }
      </nav>

      <div class="hidden lg:flex items-center space-x-4">
        @if (isAuthenticated) {
          <!-- Using the new component for the authenticated user menu -->
          <app-authenticated-user-menu
            [user]="user"
            (logout)="handleLogout()"
          ></app-authenticated-user-menu>
        } @else {
          <app-button
            variant="default"
            size="sm"
            (btnClick)="handleLogin()"
          >
            <lucide-icon [img]="icons.logIn" [size]="18"></lucide-icon>
            <span>Acceder</span>
          </app-button>
        }
      </div>

      <button
        (click)="toggleMobileMenu()"
        class="lg:hidden p-2 rounded-md text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors duration-200"
        aria-label="Toggle mobile menu"
      >
        <lucide-icon [img]="isMobileMenuOpen ? icons.x : icons.menu" [size]="24"></lucide-icon>
      </button>
    </div>

    @if (isMobileMenuOpen) {
      <div class="lg:hidden border-t border-[var(--color-border)] bg-[var(--color-card)] animate-slide-in">
        <nav class="py-4 space-y-2">
          @for (item of filteredNavItems; track item.path) {
            <button
              (click)="handleNavigation(item.path)"
              [ngClass]="{
                'text-[var(--color-primary)] bg-[var(--color-primary)]/[0.10]': isActivePath(item.path),
                'text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)]': !isActivePath(item.path)
              }"
              class="w-full flex items-center space-x-3 px-4 py-3 text-left rounded-md transition-colors duration-200"
            >
              <lucide-icon [img]="item.icon" [size]="20"></lucide-icon>
              <span class="font-body font-medium">{{ item.label }}</span>
            </button>
          }
          
          <div class="pt-4 border-t border-[var(--color-border)] mt-4">
            @if (isAuthenticated) {
              <div class="px-4 space-y-2">
                <button
                  (click)="handleNavigation('/user-dashboard')"
                  class="w-full flex items-center space-x-3 px-4 py-3 text-left rounded-md text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors duration-200"
                >
                  <lucide-icon [img]="icons.user" [size]="20"></lucide-icon>
                  <span class="font-body font-medium">Mi Perfil</span>
                </button>
                <button
                  (click)="handleLogout()"
                  class="w-full flex items-center space-x-3 px-4 py-3 text-left rounded-md text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors duration-200"
                >
                  <lucide-icon [img]="icons.logOut" [size]="20"></lucide-icon>
                  <span class="font-body font-medium">Cerrar Sesión</span>
                </button>
              </div>
            } @else {
              <div class="px-4">
                <app-button
                  variant="default"
                  size="sm"
                  (btnClick)="handleLogin()"
                  class="w-full"
                >
                  <lucide-icon [img]="icons.logIn" [size]="18"></lucide-icon>
                  <span>Acceder</span>
                </app-button>
              </div>
            }
          </div>
        </nav>
      </div>
    }
  </div>
</header>