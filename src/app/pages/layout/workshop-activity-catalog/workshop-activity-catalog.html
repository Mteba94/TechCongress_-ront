<div class="min-h-screen bg-background text-[var(--color-foreground)] font-sans">
      <app-header />
      <app-registration-call-to-action />
      
      <main class="container mx-auto px-4 py-8">
        <app-breadcrumbs />

        <!-- Encabezado de la página -->
        <div class="mb-8">
          <div class="flex items-center space-x-3 mb-4">
            <div class="w-12 h-12 bg-primary rounded-lg flex items-center justify-center">
                <lucide-icon 
                    [img]="icons.calendar" 
                    [size]="24" 
                    color="white"
                ></lucide-icon>
            </div>
            <div>
              <h1 class="text-3xl font-heading font-bold text-foreground">
                Catálogo de Actividades
              </h1>
              <p class="text-muted-foreground">
                Explora talleres, competencias y actividades sociales del TechCongress 2025
              </p>
            </div>
          </div>
          
          <div class="bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg p-4 border border-primary/20">
            <div class="flex items-start space-x-3">
              <lucide-icon 
                    [img]="icons.info" 
                    [size]="20" 
                    class="text-primary mt-0.5"
                ></lucide-icon>
              <div>
                <h3 class="font-heading font-semibold text-foreground mb-1">
                  Información importante
                </h3>
                <p class="text-sm text-muted-foreground">
                  Las inscripciones están abiertas hasta el 10 de febrero. Los cupos son limitados y se asignan por orden de llegada. 
                  Algunas actividades requieren conocimientos previos específicos.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Filtro "Mis inscripciones" -->
        <app-my-enrollments-filter
          [userEnrollments]="userEnrollments()"
          [activities]="displayedActivities()"
          [showMyEnrollments]="showMyEnrollments()"
          [isAuthenticated]="isAuthenticated()"
          (onToggleMyEnrollments)="handleToggleMyEnrollments()"
        />

        <!-- Búsqueda y Filtros -->
        <app-search-and-filters
          [searchQuery]="searchQuery()"
          (onSearchChange)="setSearchQuery($event)"
          [filters]="filters()"
          (onFiltersChange)="setFilters($event)"
          [isFilterPanelOpen]="isFilterPanelOpen()"
          (onToggleFilterPanel)="handleToggleFilterPanel()"
          [sortBy]="sortBy()"
          (onSortChange)="setSortBy($event)"
          [totalResults]="filteredAndSortedActivities().length"
        />

        <!-- Rejilla de actividades -->
        <app-activity-grid
          [activitiesInput]="filteredAndSortedActivities()"
          [loadingInput]="loading()"
          [userEnrollmentsInput]="userEnrollments()"
          [hasMoreInput]="hasMore()"
          (onEnroll)="handleEnroll($event)"
          (onViewDetails)="handleViewDetails($event)"
          (onLoadMore)="loadMoreActivities()"
        />

        <!-- Mensaje de éxito de inscripción -->
        @if (enrollmentMessage()) {
          <div class="fixed inset-x-4 bottom-4 z-[99] animate-fade-in-up md:max-w-md md:mx-auto md:right-4 md:left-auto">
            <div class="bg-emerald-500 text-white p-4 rounded-lg shadow-lg flex items-center justify-between">
              <div class="flex items-center space-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span>{{ enrollmentMessage() }}</span>
              </div>
              <button (click)="hideEnrollmentMessage()" class="text-white hover:text-white/80">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
              </button>
            </div>
          </div>
        }

        <!-- Modal de detalles de la actividad -->
        <app-activity-detail-modal
          [activity]="selectedActivity()"
          [isOpen]="isDetailModalOpen()"
          [userEnrollments]="userEnrollments()"
          (onClose)="handleCloseDetailsModal()"
          (onEnroll)="handleEnroll($event)"
        />
      </main>
    </div>